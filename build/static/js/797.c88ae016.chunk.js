"use strict";(self.webpackChunkpaymof=self.webpackChunkpaymof||[]).push([[797],{2797:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var o=n(2982),a=n(885),s=n(2791),c=n(6871),l=n(9153),r=n(184),i=function(){var e=(0,s.useState)(""),t=(0,a.Z)(e,2),n=t[0],i=t[1],u=(0,s.useState)([]),h=(0,a.Z)(u,2),d=h[0],m=h[1],f=(0,s.useState)(""),g=(0,a.Z)(f,2),p=g[0],S=g[1],x=(0,s.useState)(""),j=(0,a.Z)(x,2),v=j[0],b=j[1],C=(0,s.useState)(""),N=(0,a.Z)(C,2),y=N[0],I=N[1],k=(0,s.useState)(!1),w=(0,a.Z)(k,2),Z=w[0],T=w[1],E=(0,s.useState)(""),L=(0,a.Z)(E,1)[0],P=(0,s.useState)(!0),_=(0,a.Z)(P,2),O=_[0],B=_[1],q=(0,c.TH)(),A=(0,c.s0)();document.title="Login | Paymof";try{if(null===q.state);else var D=q.state,G=D.schoolName,H=D.adminName,J=D.adminCode}catch(y){console.log(y)}(0,s.useEffect)((function(){if(localStorage.getItem("username")){var e=localStorage.getItem("username")||"",t=localStorage.getItem("pass")||"",n=localStorage.getItem("school")||"";e&&t&&n&&(b(t),S(e),i(n))}}),[document.readyState]),(0,s.useEffect)((function(){(G||J||H)&&(i(G.toLowerCase()),S(H),b(J)),fetch("".concat(L,"/login/schools"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(e.status||A("../index"),!0!==e.error){if(m((0,o.Z)(e.school)),G)for(var t=[document.getElementsByTagName("select")[0].options],n=0;n<t[0].length;n++)if(t[0][n].value===G.toLowerCase()){document.getElementsByTagName("select")[0].options.selectedIndex=n;break}}else I(e.message)})).catch((function(e){return console.log(e)}))}),[G,H,J,q]);var R=y?"alert alert-danger":"alert alert-light";return(0,r.jsx)("div",{className:"login__cont",children:(0,r.jsx)("div",{className:"inner__container",children:(0,r.jsxs)("form",{method:"POST",children:[(0,r.jsx)("p",{className:R,children:y}),(0,r.jsxs)("div",{className:"login-label",children:[(0,r.jsx)("h1",{children:"Welcome!"}),(0,r.jsx)("h4",{children:"Log in"}),(0,r.jsx)("span",{children:(0,r.jsx)("a",{href:"index",children:"Sign up for an account? "})})]}),(0,r.jsx)("h2",{className:"shool-name",children:"Select School"!==n?n:""}),(0,r.jsxs)("select",{id:"schools",value:n,onChange:function(e){return i(e.target.value)},children:[(0,r.jsx)("option",{value:"Select School",children:"Select School"}),d.map((function(e,t){return(0,r.jsx)("option",{value:e.school,children:e.school},t)}))]}),(0,r.jsx)("input",{type:"text",className:"username",onChange:function(e){return S(e.target.value)},value:p,placeholder:"Enter Username",autoComplete:"on"}),(0,r.jsx)("input",{type:"password",name:"password",className:"password",onChange:function(e){return b(e.target.value)},value:v,placeholder:"Enter Password",autoComplete:"on"}),(0,r.jsxs)("div",{className:"remember-me",children:[(0,r.jsx)("input",{type:"checkbox",name:"",id:"",onChange:function(e){return B(e.target.checked)},checked:O}),(0,r.jsx)("span",{children:"Remember Login"})]}),(0,r.jsx)("button",{onClick:function(e){if(e.preventDefault(),""!==n&&""!==p&&""!==v){if("Select School"===n)return void I("Select a school");T(!0),fetch("".concat(L,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({school:n,user:p,pass:v})}).then((function(e){return e.json()})).then((function(e){T(!1),e.error?I(e.message):(I(""),A("../".concat(n.toLowerCase().replace(/ /g,"_"),"/")),O?(localStorage.setItem("school",n),localStorage.setItem("username",p),localStorage.setItem("pass",v)):(localStorage.removeItem("school",n),localStorage.removeItem("username",p),localStorage.removeItem("pass",v)))})).catch((function(e){T(!1),console.log(e)}))}else I("All fields are required")},disabled:Z,className:"btn btn-success btn-block btn-sm",children:Z?(0,r.jsx)(l.Z.Loader,{}):"Proceed"}),(0,r.jsx)("div",{className:"new-account",children:(0,r.jsx)("span",{children:(0,r.jsx)("a",{href:"index",children:"Sign up for an account? "})})})]})})})}}}]);
//# sourceMappingURL=797.c88ae016.chunk.js.map