"use strict";(self.webpackChunkpaymof=self.webpackChunkpaymof||[]).push([[295],{9295:function(e,n,t){t.r(n),t.d(n,{default:function(){return m}});var s=t(2982),o=t(885),l=t(2791),i=t(8617),d=t(7425),a=t(9153),c=t(2185),r=t(2120),u=t(184),m=function(){var e=(0,l.useContext)(i.T),n=e.loggedSchool,t=e.url,m=e.notifications,v=(0,l.useState)([]),h=(0,o.Z)(v,2),f=h[0],p=h[1],x=(0,l.useState)(""),j=(0,o.Z)(x,2),y=j[0],g=j[1],w=(0,l.useState)(!1),b=(0,o.Z)(w,2),C=b[0],N=b[1],Z=(0,l.useState)(""),S=(0,o.Z)(Z,2),L=S[0],A=S[1],k=(0,l.useState)(""),F=(0,o.Z)(k,2),M=F[0],T=F[1],E=(0,l.useState)("0"),O=(0,o.Z)(E,2),z=O[0],D=O[1],J=(0,l.useState)(""),U=(0,o.Z)(J,2),B=U[0],Y=U[1],_=(0,l.useState)([]),q=(0,o.Z)(_,2),I=q[0],P=q[1],K=(0,l.useState)([]),R=(0,o.Z)(K,2),G=R[0],H=R[1],Q=(0,l.useState)(""),V=(0,o.Z)(Q,2),W=V[0],X=V[1],$=(0,l.useState)([]),ee=(0,o.Z)($,2),ne=ee[0],te=ee[1],se=(0,l.useState)([]),oe=(0,o.Z)(se,2),le=oe[0],ie=oe[1],de=(0,l.useState)(""),ae=(0,o.Z)(de,2),ce=ae[0],re=ae[1],ue=(0,l.useState)([]),me=(0,o.Z)(ue,2),ve=me[0],he=me[1],fe=(0,l.useState)(""),pe=(0,o.Z)(fe,2),xe=pe[0],je=pe[1],ye=(0,l.useState)([]),ge=(0,o.Z)(ye,2),we=ge[0],be=ge[1],Ce=(0,l.useState)(""),Ne=(0,o.Z)(Ce,2),Ze=Ne[0],Se=Ne[1],Le=(0,l.useState)(""),Ae=(0,o.Z)(Le,2),ke=Ae[0],Fe=Ae[1],Me=(0,l.useState)(""),Te=(0,o.Z)(Me,2),Ee=Te[0],Oe=Te[1],ze=(0,l.useState)(!1),De=(0,o.Z)(ze,2),Je=De[0],Ue=De[1],Be=(0,l.useRef)(!1);(0,l.useEffect)((function(){Be.current||(Be.current=!0,N(!0),fetch("".concat(t,"/main/settings?school=").concat(null===n||void 0===n?void 0:n.replace(/ /g,"-")),{credentials:"include"}).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){var n,t,s,o,l,i,d,a,c,r,u,m,v=null===e||void 0===e||null===(n=e.message[0])||void 0===n?void 0:n.classes;g(null===e||void 0===e||null===(t=e.message[0])||void 0===t?void 0:t.current_session),A(null===e||void 0===e||null===(s=e.message[0])||void 0===s?void 0:s.current_term),P(new Map(null===JSON||void 0===JSON?void 0:JSON.parse(null===e||void 0===e||null===(o=e.message[0])||void 0===o?void 0:o.fees))),be(null===e||void 0===e||null===(l=e.message[0])||void 0===l||null===(i=l.terms)||void 0===i?void 0:i.split(",")),te(null===e||void 0===e||null===(d=e.message[0])||void 0===d||null===(a=d.sessions)||void 0===a?void 0:a.split(",")),ie(null===e||void 0===e||null===(c=e.message[0])||void 0===c||null===(r=c.payment_method)||void 0===r?void 0:r.split(",")),he(null===e||void 0===e||null===(u=e.message[0])||void 0===u||null===(m=u.payment_for)||void 0===m?void 0:m.split(",")),p(null===JSON||void 0===JSON?void 0:JSON.parse(v)),N(!1)})).catch((function(e){N(!1),console.log(e)})))}));var Ye=function(e,n){var s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Ue(!0),fetch("".concat(t,"/main/settings/save"),{credentials:"include",headers:{"Content-Type":"application/json"},method:"POST",body:null===JSON||void 0===JSON?void 0:JSON.stringify({data:null===Array||void 0===Array?void 0:Array.from(e),name:null===n||void 0===n||null===(s=n.trim())||void 0===s?void 0:s.toLowerCase()})}).then((function(e){return e.json()})).then((function(e){Ue(!1),null!==e&&void 0!==e&&e.status?(null===m||void 0===m||m.success(e.message),document.getElementsByClassName("".concat(o))[0].classList.remove("show-modal"),document.body.style.overflow="auto",document.body.style.top=""):null===m||void 0===m||m.warning(e.message)})).catch((function(e){Ue(!1),console.log(e)}))},_e=function(e,n){""!==n&&("fees"===e?window.confirm("Do you want to delete ".concat(n," fee"))&&(I.delete(n),D(0),Ye(I,e)):"classes"===e?window.confirm("Do you want to delete ".concat(n," from class"))&&(Ye(null===f||void 0===f?void 0:f.filter((function(e){return e!==n})),e),p(null===f||void 0===f?void 0:f.filter((function(e){return e!==n}))),Y(""),D(0)):"session"===e?window.confirm("Do you want to delete ".concat(n," from session"))&&(Ye(null===ne||void 0===ne?void 0:ne.filter((function(e){return e!==n})),"sessions"),te(null===ne||void 0===ne?void 0:ne.filter((function(e){return e!==n}))),D(0)):"paymentMethod"===e?window.confirm("Do you want to delete ".concat(n," from payment method"))&&(ie(le.filter((function(e){return e!==n}))),D(0),re(""),Ye(le.filter((function(e){return e!==n})),"payment_method")):"paymentFor"===e?window.confirm("Do you want to delete ".concat(n," from paymentType"))&&(he(ve.filter((function(e){return e!==n}))),D(0),Ye(ve.filter((function(e){return e!==n})),"payment_for"),je("")):"term"===e&&window.confirm("Do you want to delete ".concat(n," from term"))&&(be(we.filter((function(e){return e!==n}))),D(0),Ye(we.filter((function(e){return e!==n})),"terms")))},qe=function(e){document.getElementsByClassName(e)[0].classList.add("show-modal"),document.body.style.overflow="hidden",window.scrollTo(0,-1*parseInt(window.scrollY||"0"))};return(0,u.jsxs)("div",{className:"__settings",children:[(0,u.jsx)(r.Notifications,{position:"top-right"}),(0,u.jsx)("h2",{children:"Settings"}),(0,u.jsxs)("div",{className:"container",children:[(0,u.jsxs)("div",{className:"classes",children:[(0,u.jsx)("h4",{className:"h5",children:"Classes"}),C?(0,u.jsx)("div",{children:(0,u.jsx)(a.Z.Loader,{})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"add-class-cont",children:[(0,u.jsx)("select",{id:"",value:W,onChange:function(e){return X(e.target.value)},className:"class-select",children:f&&f.map((function(e){return(0,u.jsx)("option",{value:e,children:e.toUpperCase()},e+Math.random())}))}),(0,u.jsxs)("div",{className:"btn-add-cont",children:[(0,u.jsxs)("button",{onClick:function(e){return qe("two")},title:"Add class",children:[" ",(0,u.jsx)("span",{children:"Add"}),(0,u.jsx)(d.p22,{size:20})]}),(0,u.jsx)("button",{title:"Delete class",onClick:function(e){return _e("classes",W)},children:(0,u.jsx)(d.YUq,{size:20,fill:"#ee2d2d"})}),(0,u.jsx)("button",{className:"tb-edit",title:"Edit",onClick:function(e){""!==W&&(document.getElementsByClassName("update-class")[0].classList.add("show-modal"),document.body.style.overflow="hidden",window.scrollTo(0,-1*parseInt(window.scrollY||"0")))},children:(0,u.jsx)(d.cpK,{size:20,fill:"orange"})})]})]}),(0,u.jsx)("h4",{className:"h6",children:"Set Current Session"}),(0,u.jsxs)("div",{className:"add-session-cont",children:[(0,u.jsx)("select",{id:"",value:y,onChange:function(e){return n=e.target.value,void(window.confirm("Do you want to change the current session to "+n)&&(g(n),""!==y?(Ue(!0),fetch("".concat(t,"/main/settings/edit-current-session"),{credentials:"include",headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({value:n})}).then((function(e){return e.json()})).then((function(e){Ue(!1),e.status?(m.success(e.message),document.getElementsByClassName("five")[0].classList.remove("show-modal"),document.body.style.overflow="auto",document.body.style.top=""):m.warning(e.message)})).catch((function(e){Ue(!1),console.log(e)}))):m.warning("Make a selection")));var n},children:f&&ne.map((function(e){return(0,u.jsx)("option",{value:e,children:e.toUpperCase()},e+Math.random())}))}),(0,u.jsxs)("div",{className:"btn-add-cont",children:[(0,u.jsxs)("button",{onClick:function(e){return qe("three")},title:"Add class",children:[" ",(0,u.jsx)("span",{children:"Add"}),(0,u.jsx)(d.p22,{size:20})]}),(0,u.jsxs)("button",{title:"Delete Session",onClick:function(e){return _e("session",y)},children:[" ",(0,u.jsx)(d.YUq,{size:20,fill:"#ee2d2d"})]})]})]}),(0,u.jsx)("h4",{className:"h6",children:"Add Payment Method"}),(0,u.jsxs)("div",{className:"add-payment-method-cont",children:[(0,u.jsx)("select",{id:"",value:ce,onChange:function(e){return re(e.target.value)},children:le&&le.map((function(e){return(0,u.jsx)("option",{value:e,children:e.toUpperCase()},e+Math.random())}))}),(0,u.jsxs)("div",{className:"btn-add-cont",children:[(0,u.jsxs)("button",{onClick:function(e){return qe("four")},title:"Add class",children:[" ",(0,u.jsx)("span",{children:"Add"}),(0,u.jsx)(d.p22,{size:20})]}),(0,u.jsxs)("button",{title:"Delete payment method",onClick:function(e){return _e("paymentMethod",ce)},children:[" ",(0,u.jsx)(d.YUq,{size:20,fill:"#ee2d2d"})]})]})]}),(0,u.jsx)("h4",{className:"h6",children:"Add Payment Type"}),(0,u.jsxs)("div",{className:"add-payment-for-cont",children:[(0,u.jsx)("select",{id:"",value:xe,onChange:function(e){return je(e.target.value)},children:ve&&ve.map((function(e){return(0,u.jsx)("option",{value:e,children:e.toUpperCase()},e+Math.random())}))}),(0,u.jsxs)("div",{className:"btn-add-cont",children:[(0,u.jsxs)("button",{onClick:function(e){return qe("five")},title:"Add class",children:[" ",(0,u.jsx)("span",{children:"Add"}),(0,u.jsx)(d.p22,{size:20})]}),(0,u.jsxs)("button",{title:"Delete payment type",onClick:function(e){return _e("paymentFor",xe)},children:[" ",(0,u.jsx)(d.YUq,{size:20,fill:"#ee2d2d"})]})]})]}),(0,u.jsx)("h4",{className:"h6",children:"Add Term"}),(0,u.jsxs)("div",{className:"add-term-cont",children:[(0,u.jsx)("select",{id:"",value:L,onChange:function(e){return n=e.target.value,void(window.confirm("Do you want to change the current term to "+n)&&(A(n),""!==L?(Ue(!0),fetch("".concat(t,"/main/settings/edit-current-term"),{credentials:"include",headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({value:n})}).then((function(e){return e.json()})).then((function(e){Ue(!1),e.status?(m.success(e.message),document.getElementsByClassName("five")[0].classList.remove("show-modal"),document.body.style.overflow="auto",document.body.style.top=""):m.warning(e.message)})).catch((function(e){Ue(!1),console.log(e)}))):m.warning("Make a selection")));var n},children:we&&we.map((function(e){return(0,u.jsx)("option",{value:e,children:e.toUpperCase()},e+Math.random())}))}),(0,u.jsxs)("div",{className:"btn-add-cont",children:[(0,u.jsxs)("button",{title:"Add Term",onClick:function(e){return qe("six")},children:[" ",(0,u.jsx)("span",{children:"Add"}),(0,u.jsx)(d.p22,{size:20})]}),(0,u.jsxs)("button",{title:"Delete Term",onClick:function(e){return _e("term",L)},children:[" ",(0,u.jsx)(d.YUq,{size:20,fill:"#ee2d2d"})]})]})]})]})]}),(0,u.jsxs)("div",{className:"fees-cont",children:[(0,u.jsx)("h3",{className:"h5",children:"Fees"}),(0,u.jsxs)("button",{onClick:function(e){return n="add-fee",document.getElementsByClassName(n)[0].classList.add("show-modal"),document.body.style.overflow="hidden",void window.scrollTo(0,-1*parseInt(window.scrollY||"0"));var n},title:"Add Fee",className:"btn btn-outline-dark btn-sm btn-add",children:[" ",(0,u.jsx)("span",{children:"Add"}),(0,u.jsx)(d.p22,{size:20})]}),(0,u.jsxs)("table",{border:1,cellSpacing:50,className:"table table-hover table-responsive",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Class"}),(0,u.jsx)("th",{children:"amount"}),(0,u.jsx)("th",{children:"action"})]})}),(0,u.jsx)("tbody",{children:C?(0,u.jsx)("tr",{className:"loading",children:(0,u.jsx)("td",{colSpan:2,children:(0,u.jsx)(a.Z.Loader,{})})}):(0,u.jsx)(u.Fragment,{children:Array.from(I).map((function(e,n){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e[0]}),(0,u.jsxs)("td",{className:"td-input",children:[" ",e[1]," "]}),(0,u.jsx)("td",{children:(0,u.jsxs)("div",{className:"action-cont",children:[(0,u.jsxs)("div",{className:"tb-edit",title:"Edit",onClick:function(n){return t=e[0],s=e[1],T(s),H(t),document.getElementsByClassName("one")[0].classList.add("show-modal"),document.body.style.overflow="hidden",void window.scrollTo(0,-1*parseInt(window.scrollY||"0"));var t,s},children:["Edit",(0,u.jsx)("button",{children:(0,u.jsx)(d.cpK,{size:20,fill:"orange"})})]}),(0,u.jsx)("div",{className:"tb-del",title:"Delete",onClick:function(n){return _e("fees",e[0])},children:(0,u.jsx)("button",{children:(0,u.jsx)(d.YUq,{size:20,fill:"#ee2d2d"})})})]})})]},n+e)}))})})]})]}),(0,u.jsx)(c.Z,{title:"Edit Class '".concat(W,"'"),save:function(){if(""!==Ee||""!==W){var e,n,s=[];null===f||void 0===f||f.forEach((function(e,n){var t,o;(null===(t=e)||void 0===t?void 0:t.toLowerCase())===(null===W||void 0===W?void 0:W.toLowerCase())&&(e=null===Ee||void 0===Ee||null===(o=Ee.toLowerCase())||void 0===o?void 0:o.trim());null===s||void 0===s||s.push(e)})),p(s),Ue(!0),fetch("".concat(t,"/main/settings/update-class"),{credentials:"include",headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({prev:null===W||void 0===W||null===(e=W.trim())||void 0===e?void 0:e.toLowerCase(),newCls:null===Ee||void 0===Ee||null===(n=Ee.trim())||void 0===n?void 0:n.toLowerCase(),classes:s})}).then((function(e){return e.json()})).then((function(e){Ue(!1),e.status?(m.success(e.message),document.getElementsByClassName("update-class")[0].classList.remove("show-modal"),document.body.style.overflow="auto",document.body.style.top=""):m.warning(e.message)})).catch((function(e){Ue(!1),console.log(e)}))}},classModal:"update-class",loading:Je,btn:Je?(0,u.jsx)(a.Z.Loader,{}):"Save",children:(0,u.jsxs)("div",{className:"inputs-container",children:[(0,u.jsxs)("div",{className:"input-cont",children:[(0,u.jsx)("label",{htmlFor:"update-class",children:"Current Class"}),(0,u.jsx)("input",{type:"text",id:"update-class",value:null===W||void 0===W?void 0:W.toUpperCase(),disabled:!0,className:"disabled"})]}),(0,u.jsxs)("div",{className:"input-cont",children:[(0,u.jsx)("label",{htmlFor:"new-u-c",children:"New Class"}),(0,u.jsx)("input",{type:"text",id:"new-u-c",value:Ee,onChange:function(e){var n;return Oe(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}})]})]})}),(0,u.jsx)(c.Z,{title:"Edit "+G+" fee",save:function(){if(""===z||"0"===z||0===z||parseInt(M)===parseInt(z));else{var e=I.set(G,z);Ye(I,"fees","one"),P(e),D("")}},classModal:"one",loading:Je,btn:Je?(0,u.jsx)(a.Z.Loader,{}):"Save",children:(0,u.jsxs)("div",{className:"inputs-container",children:[(0,u.jsxs)("div",{className:"input-cont",children:[(0,u.jsx)("label",{htmlFor:"current-fee",children:"Current Fee"}),(0,u.jsx)("input",{type:"text",id:"current-fee",value:M,disabled:!0})]}),(0,u.jsxs)("div",{className:"input-cont",children:[(0,u.jsx)("label",{htmlFor:"new-fee",children:"New Fee"}),(0,u.jsx)("input",{type:"number",id:"new-fee",value:z,onChange:function(e){return D(e.target.value)},maxLength:6})]})]})}),(0,u.jsx)(c.Z,{title:"Add Session",classModal:"three",save:function(){""===y||ne.includes(y)||(Ye([].concat((0,s.Z)(ne),[y]),"sessions","three"),te([].concat((0,s.Z)(ne),[y])),console.log("get on up"))},loading:Je,btn:Je?(0,u.jsx)(a.Z.Loader,{}):"Add",children:(0,u.jsx)("div",{className:"inputs-container",children:(0,u.jsxs)("div",{className:"input-cont",children:[(0,u.jsx)("label",{htmlFor:"add-session",children:"Add Session"}),(0,u.jsx)("input",{type:"text",id:"add-session",value:y,onChange:function(e){return g(e.target.value)}})]})})}),(0,u.jsx)(c.Z,{title:"Add payment method",classModal:"four",save:function(){var e,n;""===ce||le.includes(ce)||(Ye([].concat((0,s.Z)(le),[null===ce||void 0===ce||null===(e=ce.toLowerCase())||void 0===e?void 0:e.trim()]),"payment_method","four"),ie([].concat((0,s.Z)(le),[null===ce||void 0===ce||null===(n=ce.toLowerCase())||void 0===n?void 0:n.trim()])))},loading:Je,btn:Je?(0,u.jsx)(a.Z.Loader,{}):"Add",children:(0,u.jsx)("div",{className:"inputs-container",children:(0,u.jsxs)("div",{className:"input-cont",children:[(0,u.jsx)("label",{htmlFor:"add-payment-method",children:"Add payment Method"}),(0,u.jsx)("input",{type:"text",id:"add-payment-method",value:ce,onChange:function(e){return re(e.target.value)}})]})})}),(0,u.jsx)(c.Z,{title:"Add payment type",classModal:"five",save:function(){var e,n;""===xe||ve.includes(xe)||(Ye([].concat((0,s.Z)(ve),[null===xe||void 0===xe||null===(e=xe.toLowerCase())||void 0===e?void 0:e.trim()]),"payment_for","five"),he([].concat((0,s.Z)(ve),[null===xe||void 0===xe||null===(n=xe.toLowerCase())||void 0===n?void 0:n.trim()])),document.getElementsByClassName("five")[0].classList.remove("show-modal"),document.body.style.overflow="auto",document.body.style.top="")},loading:Je,btn:Je?(0,u.jsx)(a.Z.Loader,{}):"Add",children:(0,u.jsx)("div",{className:"inputs-container",children:(0,u.jsxs)("div",{className:"input-cont",children:[(0,u.jsx)("label",{htmlFor:"add-payment-type",children:"Add payment type"}),(0,u.jsx)("input",{type:"text",id:"add-payment-type",value:xe,onChange:function(e){return je(e.target.value)}})]})})}),(0,u.jsx)(c.Z,{title:"Add term",classModal:"six",save:function(){var e,n;""===L||we.includes(L)||(Ye([].concat((0,s.Z)(we),[null===L||void 0===L||null===(e=L.toLowerCase())||void 0===e?void 0:e.trim()]),"terms","six"),be([].concat((0,s.Z)(we),[null===L||void 0===L||null===(n=L.toLowerCase())||void 0===n?void 0:n.trim()])),document.getElementsByClassName("six")[0].classList.remove("show-modal"),document.body.style.overflow="auto",document.body.style.top="")},loading:Je,btn:Je?(0,u.jsx)(a.Z.Loader,{}):"Add",children:(0,u.jsx)("div",{className:"inputs-container",children:(0,u.jsxs)("div",{className:"input-cont",children:[(0,u.jsx)("label",{htmlFor:"add-term",children:"Add Term"}),(0,u.jsx)("input",{type:"text",id:"add-term",value:L,onChange:function(e){return A(e.target.value)}})]})})}),(0,u.jsx)(c.Z,{title:"Add Fee",classModal:"add-fee",save:function(){if(""!==ke&&""!==Ze)try{var e,n=I.set(null===Ze||void 0===Ze||null===(e=Ze.toLowerCase())||void 0===e?void 0:e.trim(),ke);Ye(I,"fees","add-fee"),P(n),Se(""),Fe("")}catch(t){console.log(t)}},loading:Je,btn:Je?(0,u.jsx)(a.Z.Loader,{}):"Add",children:(0,u.jsxs)("div",{className:"inputs-container",children:[(0,u.jsxs)("div",{className:"input-cont",children:[(0,u.jsx)("label",{htmlFor:"add-fee",children:"Class Name"}),(0,u.jsx)("input",{type:"text",id:"add-fee",value:Ze,onChange:function(e){return Se(e.target.value)}})]}),(0,u.jsxs)("div",{className:"input-cont",children:[(0,u.jsx)("label",{htmlFor:"add-new-fee",children:"Fee"}),(0,u.jsx)("input",{type:"number",id:"add-new-fee",value:ke,onChange:function(e){return Fe(e.target.value)},maxLength:8})]})]})}),(0,u.jsx)(c.Z,{title:"Add Class",classModal:"two",save:function(){if(""!==B)try{var e,n;Ye([].concat((0,s.Z)(f),[null===B||void 0===B||null===(e=B.toLowerCase())||void 0===e?void 0:e.trim()]),"classes","two"),p([].concat((0,s.Z)(f),[null===B||void 0===B||null===(n=B.toLowerCase())||void 0===n?void 0:n.trim()])),D(""),Y("")}catch(t){console.log(t)}},loading:Je,btn:Je?(0,u.jsx)(a.Z.Loader,{}):"Add",children:(0,u.jsx)("div",{className:"inputs-container",children:(0,u.jsxs)("div",{className:"input-cont",children:[(0,u.jsx)("label",{htmlFor:"add-class",children:"Class Name"}),(0,u.jsx)("input",{type:"text",id:"add-class",value:B,onChange:function(e){return Y(e.target.value)}})]})})})]})]})}}}]);
//# sourceMappingURL=295.3f97a43a.chunk.js.map