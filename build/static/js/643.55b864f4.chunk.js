"use strict";(self.webpackChunkpaymof=self.webpackChunkpaymof||[]).push([[643],{6643:function(e,n,t){t.r(n),t.d(n,{default:function(){return f}});var s=t(7762),a=t(2982),l=t(4942),i=t(885),o=t(2791),d=t(7425),r=t(2185),c=t(8617),u=t(9153),h=t(2120),v=t(4045),m=t(408),p=t(184),f=function(){var e=(0,o.useState)([]),n=(0,i.Z)(e,2),t=n[0],f=n[1],j=(0,o.useState)([]),x=(0,i.Z)(j,2),g=x[0],N=x[1],b=(0,o.useState)([]),C=(0,i.Z)(b,2),y=C[0],S=C[1],w=(0,o.useState)([]),T=(0,i.Z)(w,2),k=T[0],Z=T[1],D=(0,o.useState)([]),A=(0,i.Z)(D,2),U=A[0],E=A[1],L=(0,o.useContext)(c.T),O=L.url,M=L.notifications,I=(0,o.useState)(""),F=(0,i.Z)(I,2),G=F[0],_=F[1],P=(0,o.useState)(""),R=(0,i.Z)(P,2),B=R[0],J=R[1],q=(0,o.useState)(""),Y=(0,i.Z)(q,2),H=Y[0],W=Y[1],K=(0,o.useState)(""),Q=(0,i.Z)(K,2),$=Q[0],z=Q[1],X=(0,o.useState)(""),V=(0,i.Z)(X,2),ee=V[0],ne=V[1],te=(0,o.useState)(""),se=(0,i.Z)(te,2),ae=se[0],le=se[1],ie=(0,o.useState)(!1),oe=(0,i.Z)(ie,2),de=oe[0],re=oe[1],ce=(0,o.useState)(!1),ue=(0,i.Z)(ce,2),he=ue[0],ve=ue[1],me=(0,o.useState)(!1),pe=(0,i.Z)(me,2),fe=pe[0],je=pe[1],xe=(0,o.useState)([]),ge=(0,i.Z)(xe,2),Ne=ge[0],be=ge[1],Ce=(0,o.useState)(0),ye=(0,i.Z)(Ce,2),Se=ye[0],we=ye[1],Te=(0,o.useState)([]),ke=(0,i.Z)(Te,2),Ze=ke[0],De=ke[1],Ae=(0,o.useState)(0),Ue=(0,i.Z)(Ae,2),Ee=Ue[0],Le=Ue[1],Oe=(0,o.useState)(1),Me=(0,i.Z)(Oe,2),Ie=Me[0],Fe=Me[1],Ge=(0,o.useState)(""),_e=(0,i.Z)(Ge,2),Pe=_e[0],Re=_e[1],Be=(0,o.useState)(""),Je=(0,i.Z)(Be,2),qe=Je[0],Ye=Je[1],He=(0,o.useState)(""),We=(0,i.Z)(He,2),Ke=We[0],Qe=We[1],$e=(0,o.useState)(""),ze=(0,i.Z)($e,2),Xe=ze[0],Ve=ze[1],en=(0,o.useState)(""),nn=(0,i.Z)(en,2),tn=nn[0],sn=nn[1],an=(0,o.useState)(""),ln=(0,i.Z)(an,2),on=ln[0],dn=ln[1],rn=(0,o.useState)(""),cn=(0,i.Z)(rn,2),un=cn[0],hn=cn[1],vn=(0,o.useState)(!0),mn=(0,i.Z)(vn,2),pn=mn[0],fn=mn[1],jn=(0,o.useState)(""),xn=(0,i.Z)(jn,2),gn=xn[0],Nn=xn[1],bn=(0,o.useState)("students"),Cn=(0,i.Z)(bn,2),yn=Cn[0],Sn=Cn[1],wn=(0,o.useState)([]),Tn=(0,i.Z)(wn,2),kn=Tn[0],Zn=Tn[1],Dn=(0,o.useState)(!1),An=(0,i.Z)(Dn,2),Un=An[0],En=An[1],Ln=(0,o.useState)(!1),On=(0,i.Z)(Ln,2),Mn=On[0],In=On[1],Fn=(0,o.useState)(""),Gn=(0,i.Z)(Fn,2),_n=Gn[0],Pn=Gn[1],Rn=(0,o.useState)(!1),Bn=(0,i.Z)(Rn,2),Jn=Bn[0],qn=Bn[1],Yn=(0,o.useState)(!1),Hn=(0,i.Z)(Yn,2),Wn=Hn[0],Kn=Hn[1],Qn=(0,o.useState)(6),$n=(0,i.Z)(Qn,2),zn=$n[0],Xn=$n[1],Vn=(0,o.useState)(""),et=(0,i.Z)(Vn,2),nt=et[0],tt=et[1],st=(0,o.useState)([]),at=(0,i.Z)(st,2),lt=at[0],it=at[1],ot=(0,o.useState)([]),dt=(0,i.Z)(ot,2),rt=dt[0],ct=dt[1],ut=(0,o.useState)(!1),ht=(0,i.Z)(ut,2),vt=ht[0],mt=ht[1],pt=(0,o.useState)(0),ft=(0,i.Z)(pt,2),jt=ft[0],xt=ft[1],gt=(0,o.useState)(!1),Nt=(0,i.Z)(gt,2),bt=Nt[0],Ct=Nt[1],yt=[],St=(0,o.useRef)(0),wt=(0,o.useRef)(),Tt=function(){re(!0),fetch("".concat(O,"/main/students/").concat(yn,"?page=").concat(Ie,"&limit=").concat(zn,"&filteredClass=").concat($),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(re(!1),e.status)try{De(e.message),xt(e.total),Le(Math.ceil(e.total/zn))}catch(n){console.log("failed to set datas")}else M.warning(e.message)})).catch((function(e){re(!1),console.log(e)}))};(0,o.useEffect)((function(){return fetch("".concat(O,"/main/payment/classes"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(e.status){var n;n=e.message[0];try{var t,s,a,l,i,o;S(JSON.parse(n.classes)),W(null===e||void 0===e||null===(t=e.message[0])||void 0===t?void 0:t.current_session),J(null===e||void 0===e||null===(s=e.message[0])||void 0===s?void 0:s.current_term),E(null===e||void 0===e||null===(a=e.message[0])||void 0===a||null===(l=a.terms)||void 0===l?void 0:l.split(",")),Z(null===e||void 0===e||null===(i=e.message[0])||void 0===i||null===(o=i.sessions)||void 0===o?void 0:o.split(","))}catch(d){M.warning("failed to set datas. Try reloading")}}})).catch((function(e){return console.log(e)})),function(){S([])}}),[document.readyState]),(0,o.useEffect)((function(){Tt()}),[Ie,yn,zn]);var kt=function(e){Fe(e),fetch("".concat(O,"/main/students/").concat(yn,"?page=").concat(Ie,"&limit=").concat(zn,"&filteredClass=").concat($),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(re(!1),e.status)try{De(e.message)}catch(n){console.log("failed to set datas")}else M.warning(e.message)})).catch((function(e){re(!1),console.log(e)}))},Zt=function(e){Re(""),Ye(""),Qe(""),hn(""),dn(""),Ve(""),sn(""),fn(""),e&&fetch("".concat(O,"/main/students/get-view?key=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){var n,t,s,a,l,i,o,d,r,c,u,h,v,m,p,f;null!==e&&void 0!==e&&e.status?(Re(null===e||void 0===e||null===(n=e.message[0])||void 0===n||null===(t=n.name)||void 0===t?void 0:t.toUpperCase()),Ye(null===e||void 0===e||null===(s=e.message[0])||void 0===s?void 0:s.class.toUpperCase()),St.current=null===e||void 0===e||null===(a=e.message[0])||void 0===a?void 0:a.id,Qe(null===e||void 0===e||null===(l=e.message[0])||void 0===l||null===(i=l.guardian_name)||void 0===i?void 0:i.toUpperCase()),hn(null===e||void 0===e||null===(o=e.message[0])||void 0===o?void 0:o.guardian_id),dn(null===e||void 0===e||null===(d=e.message[0])||void 0===d?void 0:d.adm_no),Ve(null===e||void 0===e||null===(r=e.message[0])||void 0===r?void 0:r.phone_number),"active"===(null===e||void 0===e||null===(c=e.message[0])||void 0===c||null===(u=c.status)||void 0===u?void 0:u.toLowerCase())?fn(!0):fn(!1),sn(null===e||void 0===e||null===(h=e.message[0])||void 0===h||null===(v=h.address)||void 0===v?void 0:v.toUpperCase()),Nn(""!==(null===e||void 0===e||null===(m=e.message[0])||void 0===m?void 0:m.discounts)?null===e||void 0===e||null===(p=e.message[0])||void 0===p||null===(f=p.discounts)||void 0===f?void 0:f.toUpperCase():"NONE"),document.getElementsByClassName("edit-modal")[0].classList.add("show-modal"),document.body.style.overflow="hidden",window.scrollTo(0,-1*parseInt(window.scrollY||"0"))):M.warning(e.message)})).catch((function(e){return console.log(e)}))};return(0,p.jsxs)("div",{className:"__students",children:[(0,p.jsx)("h2",{children:"Students"}),(0,p.jsx)(h.Notifications,{position:"top-right"}),(0,p.jsxs)("div",{className:"add-container",children:[(0,p.jsx)("div",{className:"add",onClick:function(){return _(""),ne(""),le(""),z(""),document.getElementsByClassName("student-add-modal")[0].classList.add("show-modal"),document.body.style.overflow="hidden",void window.scrollTo(0,-1*parseInt(window.scrollY||"0"))},children:(0,p.jsx)(d.p22,{fill:"grey",size:28})}),(0,p.jsxs)("div",{className:"btn btn-primary btn-sm upload",children:[(0,p.jsxs)("label",{htmlFor:"upload",children:[(0,p.jsx)(d.Jtq,{})," Upload XLS"]}),(0,p.jsx)("input",{type:"file",name:"upload",style:{display:"none"},id:"upload",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:function(e){var n=e.target.files[0];f([]),N([]);var t=new Promise((function(e,t){var s=new FileReader;s.readAsArrayBuffer(n),s.onload=function(n){var t=n.target.result,s=v.ij(t,{type:"buffer"}),a=s.SheetNames[0],l=s.Sheets[a],i=v.P6.sheet_to_json(l);e(i)},s.onerror=function(e){t(e)}}));t.then((function(e){if(0!==(null===e||void 0===e?void 0:e.length)){var n=e[0];n=Object.keys(n),N(n),f(e)}document.getElementsByClassName("upload-modal")[0].classList.add("show-modal"),document.body.style.overflow="hidden",window.scrollTo(0,-1*parseInt(window.scrollY||"0"))}))}})]}),(0,p.jsx)(m.Z,{id:"xls-button",className:"xls-button btn btn-light btn-sm ml-3",table:"table-to-xls",filename:"Student Template",sheet:"students",buttonText:"Download Template"})]}),(0,p.jsxs)("form",{className:"search-container",children:[(0,p.jsx)("label",{htmlFor:"name",children:"Name"}),(0,p.jsxs)("div",{className:"input-filter-cont",children:[(0,p.jsx)("input",{type:"select",id:"name",value:G,onKeyUp:function(){return function(){if(we(0),G.length>1){var e;""!==$&&yt.push({class:null===$||void 0===$||null===(e=$.trim())||void 0===e?void 0:e.toLowerCase()}),yt.length>0?fetch("".concat(O,"/main/students/find-name"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:null===G||void 0===G?void 0:G.trim().toLowerCase(),condition:!0,filterArray:yt}),credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.status&&be(e.message)})).catch((function(e){return console.log(e)})):fetch("".concat(O,"/main/students/find-name"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:G,condition:!1}),credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.status&&be(e.message)})).catch((function(e){return console.log(e)}))}else be([])}()},onChange:function(e){var n;return _(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},autoComplete:"off",placeholder:"Enter Name to search"}),(0,p.jsx)("div",{className:"output-container",id:"form-id",ref:wt,children:(0,p.jsx)("div",{className:"output-names",children:Ne&&Ne.map((function(e){return(0,p.jsxs)("div",{className:"names",onClick:function(){return function(e){var n=Ne.find((function(n){return n.id===e}));_(n.name.toUpperCase()),be([]),we(e)}(null===e||void 0===e?void 0:e.id)},children:[(0,p.jsx)("span",{children:null===e||void 0===e?void 0:e.name})," ",(0,p.jsx)("span",{children:null===e||void 0===e?void 0:e.class})]},Math.random()+(null===e||void 0===e?void 0:e.name))}))})})]}),(0,p.jsxs)("select",{value:$,onChange:function(e){return function(e){var n,t;z(e.target.value),""===(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)?(Sn("students"),Tt()):(Sn("class-view"),re(!0),Fe(1),fetch("".concat(O,"/main/students/class-view?page=1&limit=").concat(zn,"&filteredClass=").concat(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(re(!1),e.status)try{De(e.message),Le(Math.ceil((null===e||void 0===e?void 0:e.total)/zn)),xt(null===e||void 0===e?void 0:e.total)}catch(n){console.log("failed to set datas")}else M.warning(e.message)})).catch((function(e){re(!1),console.log(e)})))}(e)},className:"filter-class",children:[(0,p.jsx)("option",{value:"",children:"Class"}),y&&y.map((function(e){return(0,p.jsx)("option",{value:e.toUpperCase(),children:e.toUpperCase()},Math.random())}))]}),(0,p.jsxs)("div",{className:"btn-cont",children:[(0,p.jsxs)("button",{onClick:function(e){return function(e){e.preventDefault(),be([]);var n=!1;Fe(1),n=Se>0;var t={searchId:Se,name:G.trim().toLowerCase(),status:n};Se||G?fetch("".concat(O,"/main/students/findId"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.status&&De((function(n){return e.message}))})).catch((function(e){return console.log(e)})):M.warning("Empty search")}(e)},className:"btn btn-success btn-sm",children:[" ",(0,p.jsx)(d.Qcu,{}),(0,p.jsx)("span",{style:{marginLeft:".3rem"},children:"Find"})]}),(0,p.jsx)("button",{onClick:function(e){return function(e){e.preventDefault(),Sn("students"),Fe(1),_(""),z(""),be([]),Tt()}(e)},className:"btn btn-danger btn-sm",children:"Clear"})]}),(0,p.jsx)("button",{className:"btn btn-outline-secondary btn-sm",title:"search by guardian's name",onClick:function(e){return function(e){e.preventDefault(),tt(""),it([]),we(0),ct([]),document.getElementsByClassName("search-modal")[0].classList.add("show-modal"),document.body.style.overflow="hidden",window.scrollTo(0,-1*parseInt(window.scrollY||"0"))}(e)},children:"SBGN"}),(0,p.jsx)("button",{className:"btn btn-outline-dark btn-sm",onClick:function(e){return function(e){e.preventDefault(),Pn(""),Zn([]),En(!1),In(!Mn)}(e)},children:"Promote"})]}),Mn&&(0,p.jsxs)("div",{className:"select-cont alert alert-warning",role:"alert",children:[(0,p.jsx)("input",{type:"checkbox",checked:Un,onChange:function(e){var n;En(e.target.checked),null!==e&&void 0!==e&&null!==(n=e.target)&&void 0!==n&&n.checked?Zn(Ze.map((function(e){return e.id}))):Zn([])},id:"select-all"})," ",(0,p.jsx)("label",{htmlFor:"select-all",children:(0,p.jsx)("small",{children:"select all"})}),(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"promote-class",children:(0,p.jsx)("small",{children:"Class"})}),(0,p.jsxs)("select",{id:"promote-class",value:_n,onChange:function(e){return Pn(e.target.value)},children:[(0,p.jsx)("option",{value:"",children:"Class"}),y&&y.map((function(e){return(0,p.jsx)("option",{value:e.toUpperCase(),children:e.toUpperCase()},Math.random())}))]})]}),(0,p.jsxs)("div",{className:"change-receipt input-cont",children:[(0,p.jsx)("label",{htmlFor:"change-re",children:"CR"}),(0,p.jsx)("input",{type:"checkbox",checked:bt,onChange:function(e){var n;return Ct(null===(n=e.target)||void 0===n?void 0:n.checked)},id:"change-re"}),bt&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("select",{value:B,onChange:function(e){return J(e.target.value)},className:"filter-term",children:[(0,p.jsx)("option",{value:"",children:"Term"}),U&&(null===U||void 0===U?void 0:U.map((function(e){return(0,p.jsx)("option",{value:e,children:null===e||void 0===e?void 0:e.toUpperCase()},Math.random())})))]}),(0,p.jsxs)("select",{value:H,onChange:function(e){var n;return W(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},className:"filter-sess",children:[(0,p.jsx)("option",{value:"",children:"Session"}),k&&(null===k||void 0===k?void 0:k.map((function(e){return(0,p.jsx)("option",{value:null===e||void 0===e?void 0:e.toUpperCase(),children:null===e||void 0===e?void 0:e.toUpperCase()},Math.random())})))]})]})]}),(0,p.jsx)("button",{className:Jn?"btn btn-dark btn-sm disabled":"btn btn-dark btn-sm",title:"promote selected name",onClick:function(e){return function(e){var n,t;e.preventDefault(),0===kn.length||""===_n?M.warning("Nothing to update"):(qn(!0),fetch("".concat(O,"/main/students/promote"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({ids:kn,promoteClass:null===_n||void 0===_n||null===(n=_n.trim())||void 0===n?void 0:n.toLowerCase(),receipt:bt,term:null===(t=B.trim())||void 0===t?void 0:t.toLowerCase(),session:H})}).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){qn(!1),null!==e&&void 0!==e&&e.status?(M.success(null===e||void 0===e?void 0:e.message),Tt(),In(!1)):M.warning(null===e||void 0===e?void 0:e.message)})).catch((function(e){qn(!1),console.log(e)})))}(e)},disabled:Jn,children:Jn?(0,p.jsx)(u.Z.Loader,{}):"Save"}),(0,p.jsxs)("div",{className:"close",onClick:function(){return In(!1)},children:[(0,p.jsx)(d.tgW,{fill:"red"})," "]})]}),(0,p.jsxs)("div",{className:"table-cont",children:[(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:".5rem",marginRight:".3rem",alignItems:"center",cursor:"pointer"},children:[(0,p.jsx)(d.PwW,{title:"refresh",onClick:function(){return Tt()}}),(0,p.jsxs)("small",{children:["Total: ",jt]})]}),(0,p.jsxs)("div",{className:"our-table",children:[(0,p.jsxs)("div",{className:"header",children:["Name",(0,p.jsxs)("select",{value:zn,onChange:function(e){return function(e){var n;Fe(1),Xn(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}(e)},children:[(0,p.jsx)("option",{value:"6",children:"6"}),(0,p.jsx)("option",{value:"10",children:"10"}),(0,p.jsx)("option",{value:"20",children:"20"}),(0,p.jsx)("option",{value:"50",children:"50"}),(0,p.jsx)("option",{value:"100",children:"100"})]})]}),(0,p.jsx)("div",{className:"header",children:"Class"}),(0,p.jsx)("div",{className:"header",children:"Status"}),(0,p.jsx)("hr",{}),de?(0,p.jsx)("div",{className:"table-row loading",style:{textAlign:"center",padding:".3rem"},children:"loading..."}):0===Ze.length?(0,p.jsx)("div",{className:"table-row",style:{textAlign:"center",padding:".3rem"},children:"No students available"}):Ze.map((function(e){var n;return(0,p.jsxs)("details",{className:"table-row",children:[(0,p.jsxs)("summary",{children:[(0,p.jsxs)("span",{children:[(0,p.jsx)("span",{children:Mn&&(0,p.jsx)("input",{type:"checkbox",checked:kn.includes(null===e||void 0===e?void 0:e.id),onChange:function(n){return t=null===e||void 0===e?void 0:e.id,void(kn.includes(t)?Zn(kn.filter((function(e){return e!==t}))):Zn([].concat((0,a.Z)(kn),[t])));var t}})}),(0,p.jsx)("span",{children:null===e||void 0===e?void 0:e.name})]}),(0,p.jsx)("span",{children:null===e||void 0===e?void 0:e.class}),(0,p.jsxs)("span",{className:"status",children:[(0,p.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.status]}),"active"===(null===e||void 0===e||null===(n=e.status)||void 0===n?void 0:n.toLowerCase())?(0,p.jsx)(d.o$3,{fill:"green"}):(0,p.jsx)(d.o$3,{fill:"red"})]})]}),(0,p.jsxs)("p",{className:"alert alert-info",children:[(0,p.jsx)("small",{className:"alert-heading h5",children:"Details"}),(0,p.jsxs)("span",{className:"details-content",children:[(0,p.jsx)("span",{children:"Name"}),(0,p.jsx)("span",{children:null===e||void 0===e?void 0:e.name})]}),(0,p.jsxs)("span",{className:"details-content",children:[(0,p.jsx)("span",{children:"Class"}),(0,p.jsx)("span",{children:null===e||void 0===e?void 0:e.class})]}),(0,p.jsxs)("span",{className:"details-content",children:[(0,p.jsx)("span",{children:"Guardian's Name"}),(0,p.jsx)("span",{children:e.guardian_name})]}),(0,p.jsxs)("span",{className:"details-content",children:[(0,p.jsx)("span",{children:"Guardian's Tel"}),(0,p.jsx)("span",{children:e.phone_number})]}),(0,p.jsxs)("span",{className:"details-content",children:[(0,p.jsx)("span",{children:"Admission No"}),(0,p.jsx)("span",{children:null===e||void 0===e?void 0:e.adm_no})]}),(0,p.jsxs)("span",{className:"details-content",children:[(0,p.jsx)("span",{children:"Special Discount"}),(0,p.jsx)("span",{children:null===e||void 0===e?void 0:e.discounts})]}),(0,p.jsxs)("span",{className:"details-content",children:[(0,p.jsx)("span",{children:"Date Registered"}),(0,p.jsx)("span",{children:new Date(e.created_at).toDateString()})]}),(0,p.jsxs)("span",{className:"details-content",children:[(0,p.jsxs)("button",{onClick:function(){return Zt(e.id)},className:"btn btn-light btn-sm mt-2",children:[(0,p.jsx)(d.enh,{fill:"orangered"})," Update"]}),(0,p.jsx)("button",{onClick:function(){var n;(n=e.id)&&window.confirm("Do you want to delete this student")&&fetch("".concat(O,"/main/students/delete?key=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.status?(M.success(e.message),De(Ze.filter((function(e){return e.id!==n})))):M.warning(e.message)})).catch((function(e){return console.log(e)}))},className:"btn btn-danger btn-sm mt-2",children:"Delete"}),(0,p.jsx)("button",{onClick:function(n){return function(e,n){e.preventDefault();var t=document.createElement("textarea");t.innerText=n,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove(),mt(!0),setTimeout((function(){return mt(!1)}),5e3)}(n,null===e||void 0===e?void 0:e.guardian_id)},className:"btn btn-light btn-sm mt-2",children:vt?(0,p.jsx)(d.ffJ,{fill:"green"}):(0,p.jsx)(d.WiF,{})})]})]})]},(null===e||void 0===e?void 0:e.keyid)+new Date+Math.random())}))]})]}),Ze.length>0&&(0,p.jsxs)("div",{className:"pagination-buttons",children:[(0,p.jsx)("button",{onClick:function(){return kt(1)},disabled:1===Ie,className:"first-page",children:"First"}),(0,p.jsx)("button",{onClick:function(){return kt(Ie-1)},disabled:1===Ie,className:"prev-page",children:"Prev"}),Array.from(Array(Ee).keys()).map((function(e){return e<=7?(0,p.jsx)("button",{onClick:function(){return kt(e+1)},className:Ie-1===e?"active":"",children:e+1},e+1):""})),(0,p.jsx)("button",{onClick:function(){return kt(Ie+1)},disabled:Ie===Ee,className:"next-page",children:"Next"}),(0,p.jsx)("button",{onClick:function(){return kt(Ee)},disabled:Ie===Ee,className:"last-page",children:"Last"})]}),(0,p.jsx)(r.Z,{classModal:"search-modal",notShowSave:!0,title:"Search student by Guardian's Name",children:(0,p.jsxs)("div",{className:"search-cont",children:[(0,p.jsxs)("form",{className:"search-container",children:[(0,p.jsx)("label",{htmlFor:"g-name",children:"Guardian's Name"}),(0,p.jsxs)("div",{className:"input-filter-cont",children:[(0,p.jsx)("input",{type:"select",id:"g-name",value:nt,onKeyUp:function(){return we(0),void(nt.length>1?fetch("".concat(O,"/main/students/find-g-name"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:null===nt||void 0===nt?void 0:nt.trim().toLowerCase()}),credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.status&&it(e.message)})).catch((function(e){return console.log(e)})):it([]))},onChange:function(e){var n;return tt(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},autoComplete:"off",placeholder:"Enter Guardians Name to search"}),(0,p.jsx)("div",{className:"output-container",id:"search-id",children:(0,p.jsx)("div",{className:"output-names",children:lt&&lt.map((function(e){return(0,p.jsx)("div",{className:"names",onClick:function(){return function(e){var n,t=lt.find((function(n){return n.guardian_id===e}));tt(null===t||void 0===t||null===(n=t.guardian_name)||void 0===n?void 0:n.toUpperCase()),it([]),we(e)}(null===e||void 0===e?void 0:e.guardian_id)},children:(0,p.jsx)("span",{children:null===e||void 0===e?void 0:e.guardian_name})},Math.random()+(null===e||void 0===e?void 0:e.guardian_id))}))})})]}),(0,p.jsxs)("div",{className:"btn-cont",children:[(0,p.jsxs)("button",{onClick:function(e){return function(e){e.preventDefault(),it([]);var n={searchId:Se};fetch("".concat(O,"/main/students/find-guardian"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.status&&(ct(null===e||void 0===e?void 0:e.message),ct(function(e){var n,t=[],a=(0,s.Z)(e);try{var l=function(){var e,s,a,l,i,o=n.value,d=null===t||void 0===t?void 0:t.find((function(e){var n,t,s;return(null===e||void 0===e||null===(n=e.label)||void 0===n?void 0:n.toLowerCase().trim())===(null===o||void 0===o||null===(t=o.guardian_name)||void 0===t||null===(s=t.toLowerCase())||void 0===s?void 0:s.trim())}));d||(d={label:null===o||void 0===o||null===(i=o.guardian_name)||void 0===i?void 0:i.toUpperCase(),key:null===o||void 0===o?void 0:o.guardian_id,children:[]},t.push(d)),null===(e=d)||void 0===e||null===(s=e.children)||void 0===s||s.push({label:null===o||void 0===o||null===(a=o.name)||void 0===a?void 0:a.toUpperCase(),class:null===o||void 0===o||null===(l=o.class)||void 0===l?void 0:l.toUpperCase(),key:null===o||void 0===o?void 0:o.id})};for(a.s();!(n=a.n()).done;)l()}catch(i){a.e(i)}finally{a.f()}return t}(e.message)))})).catch((function(e){return console.log(e)}))}(e)},className:"btn btn-success btn-sm",children:[" ",(0,p.jsx)(d.Qcu,{}),(0,p.jsx)("span",{style:{marginLeft:".3rem"},children:"Find"})]}),(0,p.jsx)("button",{onClick:function(e){return function(e){e.preventDefault(),tt(""),it([]),we(0),ct([])}(e)},className:"btn btn-danger btn-sm",children:"Clear"})]})]}),(0,p.jsx)("div",{className:"output-search",children:0!==rt.length&&(null===rt||void 0===rt?void 0:rt.map((function(e){var n,t,s;return(0,p.jsxs)("div",{className:"tree-container",children:[(0,p.jsxs)("div",{className:"tree-parent",children:[(0,p.jsx)("div",{className:"parent-label",children:"Parent"}),(0,p.jsx)("div",{children:null===e||void 0===e?void 0:e.label}),(0,p.jsx)("div",{children:(0,p.jsx)(d.dtO,{})})]}),(0,p.jsxs)("div",{className:"children-cont",children:[(0,p.jsx)("div",{className:"children-label",children:(null===e||void 0===e||null===(n=e.children)||void 0===n?void 0:n.length)>1?"Children":"Child"}),(0,p.jsx)("div",{children:(0,p.jsx)(d.dtO,{})}),(0,p.jsx)("div",{className:(null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length)>1?"children-container":"child-container",children:null===(s=e.children)||void 0===s?void 0:s.map((function(e){return(0,p.jsxs)("div",{className:"child",children:[(0,p.jsx)("div",{children:null===e||void 0===e?void 0:e.label}),(0,p.jsx)("div",{className:"class",children:null===e||void 0===e?void 0:e.class})]},null===e||void 0===e?void 0:e.key)}))})]})]},(null===e||void 0===e?void 0:e.key)+Math.random())})))})]})}),(0,p.jsx)(r.Z,{classModal:"student-add-modal",btn:he?(0,p.jsx)(u.Z.Loader,{}):"Add",save:function(){var e,n,t;""===$||""===G||""===ee?M.warning("Enter necessary Fields"):(ve(!0),fetch("".concat(O,"/main/students/add-student"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:null===G||void 0===G||null===(e=G.trim())||void 0===e?void 0:e.toLowerCase(),filteredClass:null===$||void 0===$||null===(n=$.trim())||void 0===n?void 0:n.toLowerCase(),guardianName:null===ee||void 0===ee||null===(t=ee.trim())||void 0===t?void 0:t.toLowerCase(),tel:null===ae||void 0===ae?void 0:ae.trim()}),credentials:"include"}).then((function(e){return e.json()})).then((function(e){ve(!1),e.status?(M.success(e.message),_(""),z(""),Sn("students"),Tt(),document.getElementsByClassName("student-add-modal")[0].classList.remove("show-modal"),document.body.style.overflow="auto",document.body.style.top=""):M.warning(e.message)})).catch((function(e){ve(!1)})))},title:"Add student",loading:he,children:(0,p.jsxs)("form",{action:"",children:[(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"add-name",children:"Name"}),(0,p.jsx)("input",{type:"text",value:G,id:"add-name",onChange:function(e){return _(e.target.value)},required:!0,placeholder:"Type name here"})]}),(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"class",children:"Class"}),(0,p.jsxs)("select",{value:$,className:"filter-class",required:!0,onChange:function(e){return z(e.target.value)},id:"class",children:[(0,p.jsx)("option",{value:"",children:"Select Class"}),y&&y.map((function(e){return(0,p.jsx)("option",{value:e.toUpperCase(),children:e.toUpperCase()},Math.random())}))]})]}),(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"a-g-name",children:"Guardian's Name"}),(0,p.jsx)("input",{type:"text",value:ee,id:"a-g-name",onChange:function(e){return ne(e.target.value)},required:!0,placeholder:"Type Guardian's Name here"})]}),(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"g-tel",children:"Phone Number"}),(0,p.jsx)("input",{type:"tel",value:ae,id:"balance-user",onChange:function(e){return le(e.target.value)},required:!0,placeholder:"Enter Phone Number of Guradian"})]})]})}),(0,p.jsx)(r.Z,{title:"Update Student Info",classModal:"edit-modal",btn:fe?(0,p.jsx)(u.Z.Loader,{}):"Update",loading:fe,save:function(){var e,n,t,s,a,l;""===Pe||""===qe||""===Ke?M.warning("Enter necessary Fields"):(je(!0),fetch("".concat(O,"/main/students/save-edit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:St.current,name:null===Pe||void 0===Pe||null===(e=Pe.trim())||void 0===e?void 0:e.toLowerCase(),newClass:null===qe||void 0===qe||null===(n=qe.trim())||void 0===n?void 0:n.toLowerCase(),guardianName:null===Ke||void 0===Ke||null===(t=Ke.trim())||void 0===t?void 0:t.toLowerCase(),tel:null===Xe||void 0===Xe?void 0:Xe.trim(),address:null===tn||void 0===tn||null===(s=tn.toLowerCase())||void 0===s?void 0:s.trim(),guardianID:un.toLowerCase().trim(),studentAdm:null===on||void 0===on||null===(a=on.toLowerCase())||void 0===a?void 0:a.trim(),discounts:null===gn||void 0===gn||null===(l=gn.trim())||void 0===l?void 0:l.toLowerCase(),status:pn}),credentials:"include"}).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){je(!1),e.status?(M.success(e.message),document.getElementsByClassName("edit-modal")[0].classList.remove("show-modal"),document.body.style.overflow="auto",document.body.style.top=""):M.warning(e.message)})).catch((function(e){je(!1),console.log(e)})))},children:(0,p.jsxs)("form",{action:"",children:[(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"update-name",children:"Name"}),(0,p.jsx)("input",{type:"text",value:Pe,id:"update-name",onChange:function(e){return Re(e.target.value)}})]}),(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"update-class",children:"Class"}),(0,p.jsxs)("select",{id:"update-class",value:qe,onChange:function(e){return Ye(e.target.value)},children:[(0,p.jsx)("option",{value:"",children:"Class"}),y&&y.map((function(e){return(0,p.jsx)("option",{value:e.toUpperCase(),children:e.toUpperCase()},Math.random())}))]})]}),(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"update-g-name",children:"Guardian's Name"}),(0,p.jsx)("input",{type:"text",value:Ke,id:"update-g-name",onChange:function(e){return Qe(e.target.value)}})]}),(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"update-address",children:"Address"}),(0,p.jsx)("input",{type:"text",value:tn,id:"update-address",onChange:function(e){return sn(e.target.value)},placeholder:"Enter Guardian's address"})]}),(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"tel",children:"Guardian's Tel"}),(0,p.jsx)("input",{type:"tel",value:Xe,id:"tel",onChange:function(e){return Ve(e.target.value)},placeholder:"Enter Phone Number of Guardian"})]}),(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"g-id",children:"Guardian's ID"}),(0,p.jsx)("input",{type:"text",value:un,id:"g-id",onChange:function(e){return hn(e.target.value)},placeholder:"Guardians ID. All wards of this guardian should have same guardian.",onDoubleClick:function(){return function(){var e=function(){return(Date.now()+parseInt(Math.random().toString().slice(2))).toString(30).repeat(2)};""===un&&hn(e()+e())}()},title:"Double click to get a unique ID only if ID is empty"})]}),(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"adm",children:"Student Admission No. "}),(0,p.jsx)("input",{type:"text",value:on,id:"adm",onChange:function(e){return dn(e.target.value)},placeholder:"Student's Admission No"})]}),(0,p.jsxs)("div",{className:"input-cont",children:[(0,p.jsx)("label",{htmlFor:"discount",children:"Special Discount"}),(0,p.jsx)("input",{type:"text",value:gn,id:"discount",onChange:function(e){return Nn(e.target.value)},placeholder:"if student has any special discount or rebate"})]}),(0,p.jsxs)("div",{className:"input-cont last-input-cont",children:[(0,p.jsx)("label",{htmlFor:"status",children:"Student Status "}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{type:"checkbox",checked:pn,id:"status",onChange:function(e){return fn(e.target.checked)},className:"check"}),(0,p.jsx)("small",{children:(0,p.jsx)("i",{children:"Toggle to switch status. If checked, student is active else, student is not"})})]})]})]})}),(0,p.jsx)(r.Z,{classModal:"upload-modal",btn:Wn?(0,p.jsx)(u.Z.Loader,{}):"Add",loading:Wn,save:function(){var e=function(e){var n,t;return null===e||void 0===e||null===(n=e.toString())||void 0===n||null===(t=n.toLowerCase())||void 0===t?void 0:t.trim()},n=null===g||void 0===g?void 0:g.map((function(e){var n;return null===e||void 0===e||null===(n=e.trim())||void 0===n?void 0:n.toLowerCase().replace(/ /g,"_")})),s=[];console.log(t),t.forEach((function(n){var t=[];for(var a in n)t.push((0,l.Z)({},a,e(n[a])));s.push(t)})),Kn(!0),fetch("".concat(O,"/main/students/add-student-upload"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({header:n,file:s}),credentials:"include"}).then((function(e){return e.json()})).then((function(e){Kn(!1),e.status?(M.success(e.message),_(""),z(""),Sn("students"),Tt(),document.getElementsByClassName("upload-modal")[0].classList.remove("show-modal"),document.body.style.overflow="auto",document.body.style.top=""):M.warning(e.message)})).catch((function(e){Kn(!1)}))},notShowSave:0===t.length,children:(0,p.jsxs)("div",{className:"preview table-responsive",children:[(0,p.jsx)("h4",{className:"h4",children:"Preview Data"}),(0,p.jsxs)("table",{className:"table table-bordered table-hoverable",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"NAME"}),(0,p.jsx)("th",{children:"CLASS"}),(0,p.jsx)("th",{children:"GUARDIAN NAME"}),(0,p.jsx)("th",{children:"PHONE NUMBER"}),(0,p.jsx)("th",{children:"ADM NO"}),(0,p.jsx)("th",{children:"ADDRESS"}),(0,p.jsx)("th",{children:"DISCOUNTS"}),(0,p.jsx)("th",{children:"GUARDIAN ID"}),(0,p.jsx)("th",{children:"STATUS"})]})}),(0,p.jsx)("tbody",{children:0===t.length?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:10,children:"No data to preiew"})}):null===t||void 0===t?void 0:t.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e.NAME}),(0,p.jsx)("td",{children:e.CLASS}),(0,p.jsx)("td",{children:e["GUARDIAN NAME"]}),(0,p.jsx)("td",{children:e["PHONE NUMBER"]}),(0,p.jsx)("td",{children:e["ADM NO"]}),(0,p.jsx)("td",{children:e.ADDRESS}),(0,p.jsx)("td",{children:e.DISCOUNTS}),(0,p.jsx)("td",{children:e["GUARDIAN ID"]}),(0,p.jsx)("td",{children:e.STATUS})]},Math.random())}))})]})]})}),(0,p.jsxs)("table",{id:"table-to-xls",style:{display:"none"},children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"NAME"}),(0,p.jsx)("th",{children:"CLASS"}),(0,p.jsx)("th",{children:"GUARDIAN NAME"}),(0,p.jsx)("th",{children:"PHONE NUMBER"}),(0,p.jsx)("th",{children:"ADM NO"}),(0,p.jsx)("th",{children:"ADDRESS"}),(0,p.jsx)("th",{children:"DISCOUNTS"}),(0,p.jsx)("th",{children:"GUARDIAN ID"}),(0,p.jsx)("th",{children:"STATUS"})]})}),(0,p.jsx)("tbody",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Make no alterations to the headers. Leave empty if no value. Do not add any extra column to this worksheet."}),(0,p.jsx)("td",{children:"classes should be entered in relation on what is on the app"})]})})]})]})}}}]);
//# sourceMappingURL=643.55b864f4.chunk.js.map